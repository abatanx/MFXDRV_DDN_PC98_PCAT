======================================================================
   MFXDRV/DDN(XMML3.00)専用 FM/SSG音源外部ドライバ
 --------------filename---------DRVID-----------DRVIDNUM--------INDEX
 OPNドライバ  :opn.xdv		OPN		0008h 00h	%O
 OPNAドライバ :opna.xdv		OPNA		0008h 01h	〃
 SSGドライバ  :ssg.xdv		SSG		0009h 00h	%S

Copyright (C) 1994 ABA / T.Kobayashi and Interfair All Rights Reserved
======================================================================

※なんでしょう?
	MFXDRV/DDN上で、PC-9801-26K、PC-9801-86 他互換ボード及び
	98内蔵FM音源をコントロールするためのドライバです。

※ファイルの説明
	○opn.xdv
	PC98-86、-26K、98内蔵のFM音源(OPN1〜3チャンネル)をコントロールする
	ためのドライバです。PC98-86の場合は、OPNAのOPN互換部(1〜3チャンネル)
	をコントロールします。

	○opna.xdv
	PC98-86、最近の98内蔵のFM音源(OPNA)をコントロールするための
	ドライバです。OPNA(4〜6チャンネル)をコントロールします。

	○ssg.xdv
	上の音源にくっついているSSG音源(1〜3チャンネル)をコントロールする
	ためのドライバです。

※必要なファイル
	○mfxddn.com version 1.10以降
	○mld.exe

	が必要です。mddn110.lzh 以降のものに含まれております。

※組み込み方
	○86(または互換ボード)のとき
	>mfxddn
	>mld opn,opna,ssg

	○26K(または互換ボード)のとき
	>mfxddn
	>mld opn,ssg

	として、カーネルとドライバを常駐して下さい。
	楽曲を演奏するためには、タイマドライバを組み込む必要があるので
	たとえば、インターバルタイマを使用したい場合は、

	>mld itvtimer

	として、組み込んで下さい。

%O-----------------------------------------------------------------------------
★OPN/OPNA.XDV について...
	以下のオプションが使用可能です。

	/io=xxxxh	YM2203(YM2608)制御用のIOアドレスの先頭を指定します。
			通常は、188hです。
	/io2=xxxxh	YM2608制御用のIOアドレスの先頭を指定します。
			通常は、18chです。(opna.xdvのみ)
	/id=xxxxxx	DRVIDを変更します。

※DRVID について
	デフォルトのDRVIDは、'OPN'、'OPNA'です。

※DRVIDNUM について
	ECMアドレスの DRVIDNUM は、
		○OPN.XDVでは、 0008h 00h
		○OPNA.XDVでは、0007h 00h
	です。
	但し、OPNAの音色定義用のデータは OPN と共通のアドレスを
	持ちます。

※ECM(Extended Control Message)について
	以下、mplus.exe の ECMコントロール文法に従って説明します。
	なお、先頭に w がついているのは、ワードデータという意味です。
	数値の先頭に w を付けて下さい。(例:w50 とか、w0xff80とか)

	=== 音色定義 ===
	OPN/OPNAの音色を定義するECMです。
	@ecm[	0x0008 , 0x00もしくは0x01 , 0x00 ,
		wBank , Num , wLFOSync , wLFOSpeed , 0x00 ,
		DT1ML1,DT3ML3,DT2ML2,DT4ML4,	TL1   ,TL3   ,TL2   ,TL4   ,
		KS1AR1,KS3AR3,KS2AR2,KS4AR4,	DR1   ,DR3   ,DR2   ,DR4   ,
		SR1   ,SR3   ,SR2   ,SR4   ,	SL1RR1,SL3RR3,SL2RR2,SL4RR4,
		AlgFbk ];

	Bank:音色バンク		0000h〜7f7fh
	Num :音色番号		0〜255
	LFOSync :LFOをかけ始めるまでのクロック数  0〜65535(0:LFOなし)
	LFOSpeed:LFOのスピード	0〜65535(大きい方が速い;0:LFOなし)
	※注意:ここでの、LFOとは、ビブラートのことです。
	トレモロはサポートしてないので、需要mailを下さい(笑)
	※注意2:中のパラメータ(DT1ML1など)のビット構成は、OPN/OPNAの構成と全
	く同じです。
	※注意3:ym2203.mac にマクロが用意されています。

	=== 音量補正 ===
	MIDIなどと同時演奏を行うとき、OPN/OPNAのボリューム設定ではカーブが
	つらく、理想的な音量値から大幅なずれがあります。内部で指数的に
	ボリュームを変換し、音量を設定します。
	なお、演奏開始したときは、音量補正をおこなっています。
				  ~~~~~~~~~~~~~~~~~~~~~~~~~~
	@ecm[	0x0008 , 0x00もしくは0x01 , 0x01 , 0x00 ];
						音量補正を行わない。
	@ecm[	0x0008 , 0x00もしくは0x01 , 0x01 , 0x01 ];
						音量補正を行なう。
	※注意:ym2203.mac にマクロが用意されています。

	=== OPNレジスタ書き込み ===
	OPNへ直接、データを書き込みます。
	@ecm[	0x0008 , 0x00 , 0x02 , レジスタ番号 , データ ];
	※注意:ym2203.mac にマクロが用意されています。
	
	=== OPNA拡張部レジスタへの書き込み ===
	OPNAへ直接、データを書き込みます。
	@ecm[	0x0008 , 0x01 , 0x02 , レジスタ番号 , データ ];
	※注意:ym2203.mac にマクロが用意されています。

%S-----------------------------------------------------------------------------
★SSG.XDV について...
	以下のオプションが使用可能です。

	/io=xxxxh	YM2203(YM2608)制御用のIOアドレスの先頭を指定します。
			通常は、188hです。
	/id=xxxxxx	DRVIDを変更します。

※DRVID について
	デフォルトのDRVIDは、'SSG'です。

※DRVIDNUM について
	ECMアドレスの DRVIDNUM は、
		○SSG.XDVでは、 0009h 00h
	です。

※ECM(Extended Control Message)について
	以下、mplus.exe の ECMコントロール文法に従って説明します。
	なお、先頭に w がついているのは、ワードデータという意味です。
	数値の先頭に w を付けて下さい。(例:w50 とか、w0xff80とか)

	=== 音色定義 ===
	SSGの音色を定義するECMです。
	@ecm[	0x0009 , 0x00 , 0x00 , 
		wBank , Num , wSync , wSpeed ,
		音量+- , カウント , 音量+- , カウント , .......... ,0x80 ];

	現在の音量を[音量+-]で変化させ、[カウント]だけ待ちます。
	例)ピアノみたいな音
	@ecm[	0x0009 , 0x00 , 0x00 ,
		w0x0000 , 0x00 , 30 , w4000 ,
		0,3, -1,3, -1,3, -1,3, -1,3, -1,3, -1,3, -1,3, -1,3, 0x80];
	play @0cdefgab>c;

%E-----------------------------------------------------------------------------
※著作権、利用条件など。
以下、mfxddn.doc から抜粋+追加(笑)

    ○開発環境
          プログラム作成に、以下のアプリケーションを用いて作成しました。

             Machine            PC9801RA21/Cx486DLC さんきゅ
             			PC9801-86
             Library manager    tlib.exe
             EXEfile linker     tlink.exe
             TEXT Editor        vz.com ver.1.57

          いろいろご助言下さった ISL-NETの方々に深く感謝いたします。

    ○利用条件
        以下の注意事項を良くお読みになって服用してください。

         o 著作権は小林 隆生及びInterfairが保有します。

         o このプログラムを実行して起こり得た損害について、 一切責任を負わな
           いものとします。補償もしません。

         o ソースの改編後のuploadも許可します。  連絡は必要ありません。 ただ
           し、その旨をドキュメントに明確に書いてあることを条件とします。 ま
           た、改編の際、copyrightは絶対書き換えないで下さい。改編した場合便
           利な機能がついたら、私に一報下さいな(笑)

         o 転載する場合は、 本体・ソース・ドキュメントすべてを転載するように
           してください。 連絡は必要ありません。 でも、 もらったらうれしいな
           (笑)。

         o バグ修正は、最新版について行います。

         o 改造後の mfxddn.lib の配布は構いませんが、DOCにその旨を目立つよう
           に書いて置いて下さい。改造後の動作については、 一切責任は負いませ
           ん。

         o 組み込み後のプログラムの配布は、商的利用、 非商的利用どちらも構い
           ません。連絡不要です。でも、DOCファイルに書いてあったら結構嬉しい
           かも:)また、DDN,XDV単体での組み込みも構いません。

         o このソフトウェアは、FREESOFTWAREとして公開します。PDSではありませ
           ん。取り扱いに注意して下さい。

        これらの条件を満たすものだけに許可します。改編転載の場合は、できるだ
        け私(ABA)または TEANANまでご報告ください。


    ○所在先

         ABA/小林隆生  ISL-NET    isl30126
                       E-Mail     s95702@polaris.yatsushiro-nct.ac.jp
         TEANAN/山本弘 NiftyServe HGA02466
                       ISL-NET    isl31480


    ○たわごと
          もし、このソフトウェアとかを気に入って下さった方は金欠の私(笑)にご
        寄付をよろしくお願いしますo(._.)o。 ご寄付で食べたりして、新しいもの
        を開発する意欲になりますから。

      肥後銀行八代駅前支店 普通口座 店番255 口座番号XXXXXXX 小林 隆生

        宜しくお願いいたします。

