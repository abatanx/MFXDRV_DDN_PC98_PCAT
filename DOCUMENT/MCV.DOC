

mcv user's manual                                              ver.1.21C DOC



mfxddn.doc
----------------------------------------------------------------------------
標準MIDIファイルコンバータ
                              MCV version 1.21
            copyright (c) 1993,94 by T.Kobayashi / Interfair(DIL)
                            All Rights Reserved.

----------------------------------------------------------------------------






                               第1章  はじめに



      Format0もしくはFormat1の標準MIDIファイル(〜.mid)を、MFXDRV/DDNで演奏可
    能な〜.mudファイルに変換するプログラムです。あぁ、単純明快。
      なお、Format0は、暫定的に対応しているので、のちにどうにかなる(ってどう
    なんだよ)かもしれません。また、SC-88専用の演奏データで一部コンバートに失
    敗するものがあります。現在対処中。また、 MacBinaryに対応していないので、
    ヘッダ情報はあらかじめ削除しておいてください。これも対処中(笑)。

































                                   - 1 -                             DIL1994




mcv user's manual                                              ver.1.21C DOC








                                  第2章  使い方


2.1  使う前に


      これだけは、やってください。

     1. 環境変数 tmp を、なるだけ速いディスクデバイスに設定して下さい。 コン
        バートが高速になります。たとえば、j:ドライブがRAMDISKなら、

        >set tmp=j:\

        としておいてください。

     2. パスの通ったディレクトリか、もしくはカレントディレクトリに ml.exe を
        置いて下さい。ml.exeは、mfxddn.com と同じlzhファイルの中に格納されて
        います。


2.2  簡単な使い方


      どこからか、標準MIDIファイル(〜.mid)を用意してきます。レコンポーザーな
    どの〜.RCM形式はコンバートできないので、 あらかじめ cvs などで標準MIDIフ
    ァイル形式にしておきます。仮に"kikokiko.mid" とでもしておきます。

      さて、コンバートは、

    >mcv kikokiko.mid

      でokです。あとは勝手にmcvが、 ml.exeを呼び出してリンク作業までおこなっ
    てくれます。

      演奏は、mcv.exeは、'MIDI'の曲を作成しますから、

    >mfxddn
    >mld midi,itvtimer
    >mip kikokiko.mud

      でokです。簡単ですね。











                                   - 2 -                             DIL1994




mcv user's manual                                              ver.1.21C DOC








                         第3章  ちょっとつっこんでみよう


3.1  オプションについて


      mcv.exeの書式は以下の通りです。

    >mcv.exe [ファイル名|-<オプション>].....


      オプションには、以下のものが使用可能です。

         -c      コンバートのみを行います。
         -l?     Linker に ? のオプションを引き渡します。
         -e      MIDI の効果音ファイルを作成します(ﾃｽﾄ中)。
         -x      マップファイルを作成しません。
         *.mbj   指定したMIDIファイルと一緒に LINKします。


3.1.1  -cオプション

      -cオプションは、コンバートのみを行い、ml.exeを用いてlinkしません。つま
    り、〜.mbj及び〜.mbsが作成されます。
      〜.mbjのオブジェクト名は、 "_ファイル名_midi" となります。"popo.mid"を
    コンバートすると、"_popo_midi"  というオブジェクト名を持った"popo.mbj"と
    "popo.mbs"が作成されます。 なお、オブジェクトに関しては、mplus.docを読め
    ばだいたい分かると思いますので、ぜひ読んでおいて下さい。 mplusの#precede
    を用いると便利かも。


3.1.2  -lxオプション

      -lxオプションは、リンカにxというオプションを渡します。例として、

    >mcv -lo popo.mid

      とすると、ml.exeに -o オプション(最適化)が選ばれて勝手に最適化してくれ
    ます。


3.1.3  -x

      -xは、普通、トラックのコメントとかを記録した〜.mapファイルを作成します
    が、これを抑制するオプションです。







                                   - 3 -                             DIL1994




mcv user's manual                                              ver.1.21C DOC




3.1.4  *.mbj

      他の〜.mbjファイルを一緒にリンクします。例としては、

    >mcv a.mid b.mbj c.mbj d.mbj

      として作成します。 ただし、a.midから〜.mbjの中身を参照していないと意味
    がないので注意してください。


3.2  infファイルについて


      一回コンバートすると、〜.inf というファイルが作成されます。 すでに存在
    する場合には作成しません。 infファイルの中身は、  次のような意味をもちま
    す。

         title       曲のタイトルを設定します
         artist      アーティスト名を設定します
         lyric       作詞者を設定します
         composer    作曲者を設定します
         arranger    編曲者を設定します
         copyright   著作権保有対象を設定します
         track?=     各トラックの情報を設定します


3.2.1  トラック情報について

    XMML3.00 では、各トラックをそれぞれ別の音源でならせます。mplusにもトラッ
    ク状態設定というものがありますが、それとまったく同一のものです。これは、
    各トラックに独自の音源割り当て情報を含ませることができ、その情報で各トラ
    ックを独自の音源でならすことができます。 その情報を設定するのが  "track?
    =" という行です。 その書き方には3タイプあります。 それを説明していきます
    ね。

         1. track? = 音源名(チャンネル),音源名(チャンネル)....


    左から順番に指定された音源ドライバと音源のステータスを調べていき演奏可能
    なら、そのトラックを演奏可能な音源で演奏します。４つまで指定することがで
    き、４つを越えるとそのトラックは演奏されません。チャンネルは、0...n-1 ま
    でです。音源名は、各音源ドライバのドライバID と対応しています。

    トラック12をMIDI(チャンネルは1〜16まで使用可能)のチャンネル10(DRUMS)で鳴
    らしたい場合は、

    >track0 = MIDI(9)


    と指定します。

      また、音源名に OFF を用いると、そのトラックの演奏をしません。

    >track? = MIDI(4),OPN(3),BEEP(1),OFF


                                   - 4 -                             DIL1994




mcv user's manual                                              ver.1.21C DOC



         2. track?=object名(トラック番号)


      これは、 他の mbj ファイルからデータをそのトラックで演奏するというもの
    です。たとえば、SC-55 の LCD  に  メッセージを出しながら演奏したいとき、
    LCDを表示するための mid ファイルを momo_lcd.mid曲の mid ファイルを momo.
    midとして、トラック31 で、LCD を表示させるように設定します。

    momo.inf に次のように設定します。

    >track31 = _momo_lcd_midi(0)


    作成方法は、

    >mcv -c momo_lcd.mid
    >mcv momo.mid momo_lcd.mbj

    です。ちょっとわかりずらいかな^^;。

         3. track?=無指定


    この場合、mcvは勝手に track?  = MIDI(?) というようにコンバートします。チ
    ャンネルは、自動的に検出して書き出します。
































                                   - 5 -                             DIL1994




mcv user's manual                                              ver.1.21C DOC








                     第4章  謝辞及び著作権表示、使用条件など


    ○開発環境
          プログラム作成に、以下のアプリケーションを用いて作成しました。

             Machine PC9801RA21/Cx486DLC and P5-100M AT互換機  さんきゅ
             C++ Compiler       Turbo-C++ ver.1.01
             Assembler          Turbo Assembler ver.2.0
             Library manager    tlib.exe
             EXEfile linker     tlink.exe
             TEXT Editor        vz.com ver.1.57


          ドキュメント作成に、以下のアプリケーション用いて作成しました。

             TEXT formatter     ntf.exe
             Kanji code Filter  nkf (UNIX版)


          ntfで書くと、 文章をぽんぽんかけるので非常にありがたいです(笑)。作
        者に tomoyuki niijimaさんに感謝いたします^^;。
          いろいろご助言下さった ISL-NETの方々に深く感謝いたします。

    ○利用条件
        以下の注意事項を良くお読みになって服用してください。

         o 著作権は小林 隆生及びInterfairが保有します。

         o このプログラムを実行して起こり得た損害について、 一切責任を負わな
           いものとします。 補償もしません。'95 7/1 からPL法が施行されるよう
           ですが、本プログラムもその対象となるならば、 その時点でサポートを
           一切打ち切ります(フリーソフトだから。シェアウェアならわからんでも
           ないが)。

         o ソースの改編後のuploadも許可します。  連絡は必要ありません。 ただ
           し、その旨をドキュメントに明確に書いてあることを条件とします...と
           しておいたのですが、面倒くさいのでやめます。 自分のつかいやすよう
           にパッチなどを当てて使用して下さい。

         o 転載する場合は、 本体・ソース・ドキュメントすべてを転載するように
           してください。 連絡は必要ありません。 でも、 もらったらうれしいな
           (笑)。

         o バグ修正は、最新版について行います。 ローカルバージョンには行いま
           せん(笑)。またバグ修正を行う義務は作者には一切ないものとします。

         o 組み込み後のプログラムの配布は、商的利用、 非商的利用どちらも構い
           ません。連絡不要です。でも、DOCファイルに書いてあったら結構嬉しい
           かも:)また、DDN,XDV単体での組み込みも構いません。


                                   - 6 -                             DIL1994




mcv user's manual                                              ver.1.21C DOC


         o このソフトウェアは、Free Software として公開します。 一部のマクロ
           ファイルを除き、PDSではありません。取り扱いに注意して下さい。

        これらの条件を満たすものだけに許可します。

    ○連絡先

         ABA/小林 隆生  ISL-NET    isl30126
                        E-Mail     s95702@polaris.yatsushiro-nct.ac.jp
         TEANAN/山本 弘 NiftyServe HGA02466
                        ISL-NET    isl31480


    ○たわごと
          もし、このソフトウェアとかを気に入って下さった方は金欠の私(笑)にご
        寄付をよろしくお願いしますo(._.)o。ご寄付で食べたりして、 新しいもの
        を開発する意欲になりますから。

      肥後銀行八代駅前支店 普通口座 店番255 口座番号XXXXXXX 小林 隆生

        宜しくお願いいたします。


----------------------------------------------------------------------------
mcv ver.1.21C
                                 Copyright (c) 1993,94 by T.Kobayashi and □
                                                           Interfair Lab. □
                                                     all rights reserved. □






























                                   - 7 -                             DIL1994


